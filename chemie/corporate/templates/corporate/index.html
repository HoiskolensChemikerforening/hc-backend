{% extends "corporate/base.html" %}
{% load static %}

{% block content %}
  <div class="top-banner background-dark">
    <div class="container">
      <div class="row">
        <div class="col-10">
          <div>
            <h2 class="subheader-main" style="opacity: 80%">
              Industrikomiteen
            </h2>
            <h1 class="display-font">
              HC sin kontakt <br> til arbeidslivet
            </h1>
            <h2 class="subheader-main">
              Følg med på bedriftspresentasjoner, jobbutlysninger og mer
            </h2>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container" style="margin-bottom: 160px;">
    <div class="row">
      <div class="col-12">
        <h3 class="heading">
          Industrikomiteen
        </h3>
      </div>

      <div class="col-12 col-md-6">
        <p class="lead">
          Denne siden administreres av Industrikomiteen - Høiskolens Chemikerforenings kontakt med industrien.
          Her finner du en full oversikt over Industrikomiteens arrangementer og relevante jobbutlysninger.
          I tillegg kan du finne intervjuer med eldre kjemikere og informasjon fra diplomundersøkelsen -
          en årlig undersøkelse for å kartlegge jobbmarkedet via utgåtte MTKJ-studenter.
          Sidene enda i oppstartsfasen og Industrikomiteen er på saken med å bygge opp innhold.
          Vi gleder oss masse til å dele spennende informasjon med dere.
        </p>
        <a href="{{ indkom.get_absolute_url }}" class="button-fill">
          Les mer <!-- TODO: Fix Font Awesome icon -->
        </a>

      </div>

      <div class="col-12 col-md-6">
        <img src="{{ indkom.image.url }}" alt="..." class="img-fluid" style="margin-bottom: 50px">
      </div>


      <div class="col-12 col-md-4">
        <h4 class="subheading">
          Samarbeidspartnere
        </h4>
        <img src="https://images.finncdn.no/dynamic/default/2020/7/vertical-0/10/2/184/412/212_1087034308.jpg"
             alt="Emerson" style="width: 300px; max-width: 100%; margin-bottom: 30px">
        <p style="font-size: var(--font-size-small)">
          Høstsemesteret 2020 har Emerson sponset kaffen til alle MTKJ-studenter
        </p>
      </div>
    </div>
  </div>


  <div class="jumbotron jumbotron-fluid" style="background-color: var(--main-color-dark);
  color: var(--main-color-light); margin-bottom: 100px;">
    <div class="container">
      <div class="row" style="margin: 40px 0 60px 0;">
        <div class="col-12 col-lg-4">
          <h3 class="heading">
            Utforsk arrangementer
          </h3>
        </div>
        <div class="col-12 col-lg-8">
          <p style="font-size: var(--font-size-small); color: var(--gray-200)">
            Vi arrangerer
            <a class="link" style="opacity: 100%" href="{% url "events:index_bedpres" %}">bedriftspresentasjoner</a>
            flere ganger i semesteret. En bedrift kommer og forteller om sin virksomhet, hva som venter nyutdannede
            sivilingeniører i bedriften og andre emner som kan interessere studentene.
          </p>
        </div>
      </div>

      <hr style="background: white; margin-bottom: 40px">

      <div class="row" style="margin-bottom: 50px">
        <div class="col-12">
          {% if no_events %}
          <p>For øyblikket er det ikke planlagt noen arrangementer.</p>
          {% else %}
            {% for bp in bedpres %}
              <div class="col-12 col-md-3" style="margin-bottom: 10px">
                <a href="{{ bp.get_absolute_url }}" class="link">
                  <p style="font-size: var(--font-size-medium-plus); font-weight: 600; margin-bottom: 8px">
                    {{ bp.title }}
                  </p>
                </a>
                <p>{{ bp.date }}</p>
              </div>
              <div class="col-12 col-md-9"></div>
            {% endfor %}

            {% for event in events %}
              <div class="col-12 col-md-3" style="margin-bottom: 10px">
                <a href="{{ event.get_absolute_url }}" class="link">
                  <p style="font-size: var(--font-size-medium-plus); font-weight: 600;  margin-bottom: 8px">
                    {{ event.title }}
                  </p>
                </a>
                <p>{{ event.date }}</p>
              </div>
              <div class="col-12 col-md-9"></div>
            {% endfor %}
          {% endif %}
        </div>
      </div>

      <div class="row">
        {% if perms.events.add_bedpres %}
        <div class="col-12">
          <p style="font-weight: 600; font-size: var(--font-size-large); margin-bottom: 24px">Ønsker du å opprette et arrangement?</p>
        </div>
        <div class="col-12 col-md-6 col-lg-4 col-xl-3" style="margin-bottom: 30px">
          <a class="button-nofill" href="{% url "events:create_bedpres" %}">
          Ny bedpres
          </a>
        </div>
        {% endif %}
        {% if perms.events.add_social %}
        <div class="col-12 col-md-6 col-lg-4 col-xl-3">
          <a class="button-nofill" href="{% url "events:create_social" %}">
          Nytt sosialt arrangement
          </a>
        </div>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="container">

    <div class="row" style="margin-bottom: 200px">

      <div class="col-12">
        <h3 class="heading">Annet</h3>
      </div>

      <div class="col-12 col-md-4">
        <div class="card shadow-sm square">
          <p class="square-text">
            <span class="square-card-header">
              Jobbutlysninger
            </span>
            <br style="margin-bottom: 10px">
            Finn relevant jobb
          </p>
          <a class="stretched-link" href="{% url "corporate:job_advertisement" %}"> </a>
        </div>
      </div>

      <div class="col-12 col-md-4">
        <div class="card shadow-sm square">
          <p class="square-text">
            <span class="square-card-header">
              Intervjuer
            </span>
            <br style="margin-bottom: 10px">
            Les intervjuer med tidligere studenter
          </p>
          <a class="stretched-link" href="{% url "corporate:interview" %}"> </a>
        </div>
      </div>

      <div class="col-12 col-md-4">
        <div class="card shadow-sm square">
          <p class="square-text">
            <span class="square-card-header">
              Diplomundersøkelsen
            </span>
            <br style="margin-bottom: 10px">
            Lurer du på hvor tidligere studenter har endt opp? Sjekk statistikken
          </p>
          <a class="stretched-link" href="{% url "corporate:statistics" %}"> </a>
        </div>
      </div>

    </div>

  </div>

  <!--
      <div class="card" id="jobBox" style="margin: 40px;">
        <div class="card-body">
          <div class="row">
            <div class="col">
            </div>
            <div class="col">
              {% if perms.corporate.add_jobadvertisement %}
                <a href="{% url "corporate:job_create" %}" style="float:right; color:#343A40;">
                  <i class="fa fa-plus" style="font-size:36px"></i>
                </a>
              {% endif %}
            </div>
          </div>
          <p>
            Her vil det fortløpende legges ut informasjon om sommerjobber og relevante faste arbeidsstillinger.
          </p>

          {% for job in job_advertisements %}
            <hr>
            <a class="collapser" data-toggle="collapse" href="#jobCollapse{{ job.id }}" style="color:#343A40">
              <h5>{{ job.title }}</h5></a>
            <div class="collapse multi-collapse" id="jobCollapse{{ job.id }}">
              <div class="row">
                <div class="col-9">
                  {{ job.description | safe }}
                </div>
                <div class="col-3">
                  {% if perms.corporate.delete_jobadvertisement %}
                    <a type="button" class="btn"
                       onclick="deleteJobPopup({{ interview.id }})"
                       style="float:right; background-color:#343A40; color: white;"
                       id="deleteInterview{{ job.id }}"
                       data-url="{% url "corporate:job_delete" job.id %}">
                      <i class="fa fa-trash"> Slett</i>
                    </a>
                  {% endif %}
                </div>
              </div>
            </div>
          {% empty %}
            <p>For øyeblikket er det ingen publiserte jobbutlysninger.</p>
          {% endfor %}
        </div>
      </div>
      <br>
    </div>
    <div class="col-1"></div>
  </div>
    </div>

  <div class="container">
  <div class="row">
    <div class="col-1"></div>
    <div class="col-5">

      <div class="card" id="interviewBox" style="margin: 40px;">
        <div class="card-body">
          <div class="row">
            <div class="col">
              <h2 class="card-title">Intervjuer</h2>
            </div>
            <div class="col">
              {% if perms.corporate.add_interview %}
                <a href="{% url "corporate:interview_create" %}" style="float:right; color:#343A40;">
                  <i class="fa fa-plus" style="font-size:36px"></i>
                </a>
              {% endif %}
            </div>
          </div>
          <p>
            Her kan du lese intervjuer med nåværende og tidligere kjemikere med relevant arbeidserfaring.
          </p>

          {% for interview in interviews %}
            <hr>
            <div class="row">
              <div class="col">
                <h5>{{ interview.title }}</h5>
              </div>
              <div class="col">
                <a type="button" class="btn btn-dark" style="float:right; color:white;"
                   onclick="displayCorrectInterview({{ interview.id }})">Se mer
                </a>
              </div>
            </div>
          {% empty %}
            <p>For øyeblikket er det ingen publiserte intervjuer.</p>
          {% endfor %}
        </div>
      </div>

    </div>
    <div class="col-5">

      {% for interview in interviews %}
        <div class="card w-75" style="margin: 40px; display: none" id="interviewCard{{ interview.id }}">
          <img src="{{ interview.picture.url }}" class="card-img-top" alt="..." style="height: 25rem; object-fit:cover">

          <div class="card-body">
            <h4 class="card-title">{{ interview.interview_object }}</h4>
            {% for specialization in interview.specializations.all %}
              <span class="badge badge-pill badge-dark" style="font-weight: normal; background-color:#343A40;">
                {{ specialization }}
              </span>
            {% endfor %}
            <hr>
            {{ interview.text | safe }}
            {% if perms.corporate.delete_interview %}
              <a type="button" class="btn"
                 onclick="deleteInterviewPopup({{ interview.id }})"
                 style="float:right; background-color:#343A40; color: white;"
                 id="deleteInterview{{ interview.id }}"
                 data-url="{% url "corporate:interview_delete" interview.id %}">
                <i class="fa fa-trash"> Slett</i>
              </a>
            {% endif %}
          </div>
          <br><br>
        </div>
      {% endfor %}

    </div>
    <div class="col-1"></div>
  </div>
  </div>
  -->

{% endblock content %}

{% block footer_script %}
  <script>
    function displayCorrectInterview(targetId) {

      {% for interview in interviews %}
        document.getElementById("interviewCard{{ interview.id }}").style.display = "none";
      {% endfor %}

      let targetCard = document.getElementById("interviewCard" + targetId.toString());
      targetCard.style.display = "block";
    }

    function deleteInterviewPopup(id) {
      let url = document.getElementById("deleteInterview" + id.toString()).getAttribute("data-url");
      if (confirm("Er du sikker på at du vil fjerne dette intervjuet?")) {
        window.location.href = url;
      }
    }

    function deleteJobPopup(id) {
      let url = document.getElementById("deleteJob" + id.toString()).getAttribute("data-url");
      if (confirm("Er du sikker på at du vil fjerne denne jobbutlysningen?")) {
        window.location.href = url;
      }
    }

  </script>
{% endblock footer_script %}
