{% extends 'chemie/base_election.html'%}


<!--
context = {
            'candidates': election.current_position.candidates.all(),
            'winners': election.current_position.winners.all(),
            'total_votes': total_votes,
            'blank_votes': blank_votes
            }
-->
{% block content%}

<div align="center">
  <h3 class="title is-3">Vinner(e)</h3>
  {% if winners %}
    {% for winner in winners %}
      <h4 class="title is-4">{{ winner.user.get_full_name }}</h4>
    {% endfor %}
  {% else %}
    <h4 class="title is-4">Ikke et gyldig valg, {{ total_votes }} av 50 har stemt</h4>
  {% endif %}
  <div class="box">
    <h4 class="title is-6">Totalt antall stemmer: {{ total_votes }}</h4>
    <h4 class="title is-6">Blanke stemmer: {{ blank_votes }}</h4>
    <table class="table">
      <tr>
        <th>Kandidater</th>
        <th>Antall stemmer</th>
        <th>Prosent av totale stemmer</th>
      </tr>
      {% for candidate in candidates %}
        <tr>
          <td> {{ candidate.user.get_full_name }} </td>
          <td> {{ candidate.votes }} </td>
          <td>
            <p id="voting_percentage-{{candidate.id}}"></p>
            <script type="text/javascript">
              var total_votes = "{{ total_votes }}";
              var votes = "{{ candidate.votes }}";
              var percentage = (100*votes/total_votes).toFixed(2);
              document.getElementById("voting_percentage-{{candidate.id}}").innerHTML = percentage + "%";
            </script>
          </td>
      </tr>
      {% endfor %}
    </table>
  </div>
  <br>
  <a class="button is-success" href="{% url "elections:admin_register_positions" %}">Tilbake</a>
</div>

{% endblock content %}